
############################################################################
#
# AVI CONFIDENTIAL
# __________________
#
# [2013] - [2018] Avi Networks Incorporated
# All Rights Reserved.
#
# NOTICE: All information contained herein is, and remains the property
# of Avi Networks Incorporated and its suppliers, if any. The intellectual
# and technical concepts contained herein are proprietary to Avi Networks
# Incorporated, and its suppliers and are covered by U.S. and Foreign
# Patents, patents in process, and are protected by trade secret or
# copyright law, and other laws. Dissemination of this information or
# reproduction of this material is strictly forbidden unless prior written
# permission is obtained from Avi Networks Incorporated.
###

# GENERATED FILE - DO NOT EDIT THIS FILE UNLESS YOU ARE A WIZZARD
#pylint:  skip-file
import sys, os, uuid, copy
from django.db import models
from rest_framework import serializers
from rest_framework import relations
from avi.rest.models import GenBase, AviSlugField
from avi.rest.avijsonfield import AviJsonField
from avi.protobuf_json.protobuf_json import json2pb
from permission.models_initial_configuration import UpgradeInstance
from api.db_utils import (
    save_model_object, delete_model_object, get_model_object,
    get_model_protobuf, get_model_protobuf_extension, integer_validator,
    big_integer_validator, positive_integer_validator, parse_blob_into_pb
)
from avi.djorm_pgbytea.bytea import ByteaField
from django_pgjson.fields import JsonField
from avi.rest.json_db_utils import transform_json_refs_to_uuids

from models_common import *
from models_options import *
from models_pool import *
from models_debug_se import *
from models_analytics_policy import *
from models_vs_datascript import *
from models_application_policy import *
from models_auth import *
from models_rate import *
from models_gslb import *
from models_dns import *
from models_dns_policy import *
from models_content_rewrite_profile import *
from models_traffic_clone_profile import *
from models_error_page import *
from models_l4_policy import *
from models_sso import *
from models_security_policy import *
from models_security_mgr_runtime import *
from models_ssl import *

from models_network_profile import *
from models_application_profile import *
from models_vrf import *
from models_cloud_objects import *
from models_se_group import *
from models_network_policy import *
from models_analytics_profile import *
from models_micro_service import *
from models_waf import *
NO_LABEL = 1
APPLICATION_LABEL = 4
SERVICE_LABEL = 5
FlowLabelTypeChoices = (
    (NO_LABEL, 'NO_LABEL'),
    (APPLICATION_LABEL, 'APPLICATION_LABEL'),
    (SERVICE_LABEL, 'SERVICE_LABEL'),
)
CLIENT_IP = 1
URI = 2
CLIENT_IP_AND_URI = 3
UNKNOWN_URI = 4
BAD_URI = 5
UNKNOWN_CIP = 6
BAD_CIP = 7
CLIENT_IP_BAD = 8
URI_BAD = 9
CLIENT_IP_AND_URI_BAD = 10
URI_SCAN_UNKNOWN = 11
URI_SCAN_BAD = 12
CIP_SCAN_UNKNOWN = 13
CIP_SCAN_BAD = 14
CONN = 15
REQ = 16
HEADER = 17
CUSTOM_STR = 18
RqRlDropChoices = (
    (CLIENT_IP, 'CLIENT_IP'),
    (URI, 'URI'),
    (CLIENT_IP_AND_URI, 'CLIENT_IP_AND_URI'),
    (UNKNOWN_URI, 'UNKNOWN_URI'),
    (BAD_URI, 'BAD_URI'),
    (UNKNOWN_CIP, 'UNKNOWN_CIP'),
    (BAD_CIP, 'BAD_CIP'),
    (CLIENT_IP_BAD, 'CLIENT_IP_BAD'),
    (URI_BAD, 'URI_BAD'),
    (CLIENT_IP_AND_URI_BAD, 'CLIENT_IP_AND_URI_BAD'),
    (URI_SCAN_UNKNOWN, 'URI_SCAN_UNKNOWN'),
    (URI_SCAN_BAD, 'URI_SCAN_BAD'),
    (CIP_SCAN_UNKNOWN, 'CIP_SCAN_UNKNOWN'),
    (CIP_SCAN_BAD, 'CIP_SCAN_BAD'),
    (CONN, 'CONN'),
    (REQ, 'REQ'),
    (HEADER, 'HEADER'),
    (CUSTOM_STR, 'CUSTOM_STR'),
)
LOAD_AWARE = 1
CONSISTENT_HASH_SOURCE_IP_ADDRESS = 2
CONSISTENT_HASH_SOURCE_IP_ADDRESS_AND_PORT = 3
SeFlowDistChoices = (
    (LOAD_AWARE, 'LOAD_AWARE'),
    (CONSISTENT_HASH_SOURCE_IP_ADDRESS, 'CONSISTENT_HASH_SOURCE_IP_ADDRESS'),
    (CONSISTENT_HASH_SOURCE_IP_ADDRESS_AND_PORT, 'CONSISTENT_HASH_SOURCE_IP_ADDRESS_AND_PORT'),
)
VS_TYPE_NORMAL = 1
VS_TYPE_VH_PARENT = 2
VS_TYPE_VH_CHILD = 3
VirtualServiceTypeChoices = (
    (VS_TYPE_NORMAL, 'VS_TYPE_NORMAL'),
    (VS_TYPE_VH_PARENT, 'VS_TYPE_VH_PARENT'),
    (VS_TYPE_VH_CHILD, 'VS_TYPE_VH_CHILD'),
)
VNIC_TYPE_FE = 1
VNIC_TYPE_BE = 2
VnicTypeChoices = (
    (VNIC_TYPE_FE, 'VNIC_TYPE_FE'),
    (VNIC_TYPE_BE, 'VNIC_TYPE_BE'),
)

############################################################################
#
# AVI CONFIDENTIAL
# __________________
#
# [2013] - [2018] Avi Networks Incorporated
# All Rights Reserved.
#
# NOTICE: All information contained herein is, and remains the property
# of Avi Networks Incorporated and its suppliers, if any. The intellectual
# and technical concepts contained herein are proprietary to Avi Networks
# Incorporated, and its suppliers and are covered by U.S. and Foreign
# Patents, patents in process, and are protected by trade secret or
# copyright law, and other laws. Dissemination of this information or
# reproduction of this material is strictly forbidden unless prior written
# permission is obtained from Avi Networks Incorporated.
###

import time
from avi.protobuf.vs_pb2 import VsVip as VsVipProto

from models_common import Tenant


class VsVip (models.Model, GenBase):
    pb_class = VsVipProto
    json = True
    random_uuid = True

    @staticmethod
    def gen_uuid(id=1):
        return 'vsvip-%s' % uuid.uuid4()

    def save(self, update_time=False, *args, **kwargs):
        if not self.slug:
            if not self.uuid:
                self.uuid = self.gen_uuid()
            self.slug = self.uuid
        if (hasattr(self, '_last_modified') and
                (update_time or hasattr(self, '__update_time'))):
            delattr(self, '__update_time')
            self._last_modified = str(int(time.time()*1000000))
            if hasattr(self, 'json_data'):
                self.json_data['_last_modified'] = self._last_modified
        super(VsVip, self).save(*args, **kwargs)

    def save_pb(self, *args, **kwargs):
        save_model_object(self)
        super(VsVip, self).save(*args, **kwargs)

    def delete(self):
        delete_model_object(self)
        super(VsVip, self).delete()

    def serialize(self):
        return self.protobuf().SerializeToString()

    def _protobuf(self):
        pb = VsVipProto()
        if hasattr(self, 'json_data') and self.json_data:
            updated_json = copy.deepcopy(self.json_data)
            transform_json_refs_to_uuids(updated_json, refs=self.references)
            json2pb(pb, updated_json, replace=True)
        if getattr(self, 'uuid', None):
            pb.uuid = self.uuid
        pb.name = self.name
        pb.ClearField('vrf_context_uuid')
        if self.vrf_context_ref is not None:
            pb.vrf_context_uuid = self.vrf_context_ref.uuid
        pb.tenant_uuid = self.tenant_ref.uuid
        pb.ClearField('cloud_uuid')
        if self.cloud_ref is not None:
            pb.cloud_uuid = self.cloud_ref.uuid
        return pb


    def protobuf(self, decrypt=False):
        return get_model_protobuf(self, decrypt=decrypt)


    uuid = models.CharField(max_length=128, editable=False, unique=True)
    slug = AviSlugField(max_length=128, null=False, blank=False)
    pb_data = ByteaField()
    json_data = AviJsonField()
    name = models.TextField(null=False, blank=False)
    vrf_context_ref = models.ForeignKey(VrfContext, null=True, blank=True, related_name="vsvip_vrf_context_ref", on_delete=models.PROTECT)
    tenant_ref = models.ForeignKey(Tenant, null=False, blank=False, related_name="vsvip_tenant_ref", on_delete=models.PROTECT)
    cloud_ref = models.ForeignKey(Cloud, null=True, blank=True, related_name="vsvip_cloud_ref", on_delete=models.PROTECT)
    _last_modified = models.CharField(max_length=16, null=True, blank=True)

    references = {
        'root.vip.discovered_networks.network_uuid': ('hyperlink_to', u'Network', 'a748288118894475'),
        'root.cloud_uuid': ('belongs_to', u'Cloud', 'ecb115cfd6124957'),
        'root.vrf_context_uuid': ('weak_refers_to', u'VrfContext', '63b57655f70a41f6'),
        'root.vip.ipam_network_subnet.network_uuid': ('hyperlink_to', u'Network', '12108ec2f39448a9'),
        'root.vip.network_uuid': ('hyperlink_to', u'Network', 'a464807d35ed45e6'),
        'root.tenant_uuid': ('belongs_to', u'Tenant', '22142d49056047b4'),
    }
    sensitive_fields = {
    }
    pb_check_fields = {
        'root.dns_info.metadata': 'f_readonly',
        'root.cloud_uuid': 'f_immutable',
    }

    @staticmethod
    def get_extension_fields():
        return []

    class Meta:
        unique_together = ('name','tenant_ref','cloud_ref',)


############################################################################
#
# AVI CONFIDENTIAL
# __________________
#
# [2013] - [2018] Avi Networks Incorporated
# All Rights Reserved.
#
# NOTICE: All information contained herein is, and remains the property
# of Avi Networks Incorporated and its suppliers, if any. The intellectual
# and technical concepts contained herein are proprietary to Avi Networks
# Incorporated, and its suppliers and are covered by U.S. and Foreign
# Patents, patents in process, and are protected by trade secret or
# copyright law, and other laws. Dissemination of this information or
# reproduction of this material is strictly forbidden unless prior written
# permission is obtained from Avi Networks Incorporated.
###

import time
from avi.protobuf.vs_pb2 import VirtualService as VirtualServiceProto
from avi.protobuf.vs_pb2 import VirtualServiceDbExtension as VirtualServiceDbExtensionProto

from models_l4_policy import L4PolicySet
from models_vs_datascript import VSDataScriptSet
from models_common import Tenant
from models_match import StringGroup
from models_match import IpAddrGroup
from models_error_page import ErrorPageProfile
from models_dns_policy import DnsPolicy
from models_auth import AuthProfile
from models_security_policy import SecurityPolicy
from models_ssl import SSLProfile
from models_ssl import SSLKeyAndCertificate
from models_pool import PoolGroup
from models_pool import Pool
from models_sso import SSOPolicy
from models_traffic_clone_profile import TrafficCloneProfile
from models_application_policy import HTTPPolicySet


class VirtualService (models.Model, GenBase):
    pb_class = VirtualServiceProto
    pb_extension_class = VirtualServiceDbExtensionProto
    json = True
    random_uuid = True

    @staticmethod
    def gen_uuid(id=1):
        return 'virtualservice-%s' % uuid.uuid4()

    def save(self, update_time=False, *args, **kwargs):
        if not self.slug:
            if not self.uuid:
                self.uuid = self.gen_uuid()
            self.slug = self.uuid
        if (hasattr(self, '_last_modified') and
                (update_time or hasattr(self, '__update_time'))):
            delattr(self, '__update_time')
            self._last_modified = str(int(time.time()*1000000))
            if hasattr(self, 'json_data'):
                self.json_data['_last_modified'] = self._last_modified
        super(VirtualService, self).save(*args, **kwargs)

    def save_pb(self, *args, **kwargs):
        save_model_object(self)
        super(VirtualService, self).save(*args, **kwargs)

    def delete(self):
        delete_model_object(self)
        super(VirtualService, self).delete()

    def serialize(self):
        return self.protobuf().SerializeToString()

    def _protobuf(self):
        pb = VirtualServiceProto()
        if hasattr(self, 'json_data') and self.json_data:
            updated_json = copy.deepcopy(self.json_data)
            transform_json_refs_to_uuids(updated_json, refs=self.references)
            json2pb(pb, updated_json, replace=True)
        if getattr(self, 'uuid', None):
            pb.uuid = self.uuid
        pb.name = self.name
        pb.ClearField('enabled')
        if self.enabled is not None:
            pb.enabled = self.enabled
        pb.ClearField('application_profile_uuid')
        if self.application_profile_ref is not None:
            pb.application_profile_uuid = self.application_profile_ref.uuid
        pb.ClearField('se_group_uuid')
        if self.se_group_ref is not None:
            pb.se_group_uuid = self.se_group_ref.uuid
        pb.ClearField('network_security_policy_uuid')
        if self.network_security_policy_ref is not None:
            pb.network_security_policy_uuid = self.network_security_policy_ref.uuid
        pb.ClearField('vrf_context_uuid')
        if self.vrf_context_ref is not None:
            pb.vrf_context_uuid = self.vrf_context_ref.uuid
        pb.ClearField('analytics_profile_uuid')
        if self.analytics_profile_ref is not None:
            pb.analytics_profile_uuid = self.analytics_profile_ref.uuid
        pb.tenant_uuid = self.tenant_ref.uuid
        pb.ClearField('cloud_uuid')
        if self.cloud_ref is not None:
            pb.cloud_uuid = self.cloud_ref.uuid
        pb.ClearField('vsvip_uuid')
        if self.vsvip_ref is not None:
            pb.vsvip_uuid = self.vsvip_ref
        return pb

    def _protobuf_extension(self):
        pb = VirtualServiceDbExtensionProto()
        if hasattr(self, 'json_extension_data') and self.json_extension_data:
            updated_json = copy.deepcopy(self.json_extension_data)
            transform_json_refs_to_uuids(updated_json, refs=self.references)
            json2pb(pb, updated_json, replace=True)
        return pb

    def protobuf(self, decrypt=False):
        return get_model_protobuf(self, decrypt=decrypt)

    def protobuf_extension(self):
        return get_model_protobuf_extension(self)

    uuid = models.CharField(max_length=128, editable=False, unique=True)
    slug = AviSlugField(max_length=128, null=False, blank=False)
    pb_data = ByteaField()
    json_data = AviJsonField()
    pb_extension_data = ByteaField(null=True, blank=True)
    json_extension_data = AviJsonField(null=True, blank=True)
    name = models.TextField(null=False, blank=False)
    enabled = models.NullBooleanField(null=True, blank=True)
    application_profile_ref = models.ForeignKey(ApplicationProfile, null=True, blank=True, related_name="virtualservice_application_profile_ref", on_delete=models.PROTECT)
    se_group_ref = models.ForeignKey(ServiceEngineGroup, null=True, blank=True, related_name="virtualservice_se_group_ref", on_delete=models.PROTECT)
    network_security_policy_ref = models.ForeignKey(NetworkSecurityPolicy, null=True, blank=True, related_name="virtualservice_network_security_policy_ref", on_delete=models.PROTECT)
    vrf_context_ref = models.ForeignKey(VrfContext, null=True, blank=True, related_name="virtualservice_vrf_context_ref", on_delete=models.PROTECT)
    analytics_profile_ref = models.ForeignKey(AnalyticsProfile, null=True, blank=True, related_name="virtualservice_analytics_profile_ref", on_delete=models.PROTECT)
    tenant_ref = models.ForeignKey(Tenant, null=False, blank=False, related_name="virtualservice_tenant_ref", on_delete=models.PROTECT)
    cloud_ref = models.ForeignKey(Cloud, null=True, blank=True, related_name="virtualservice_cloud_ref", on_delete=models.PROTECT)
    vsvip_ref = models.TextField(null=True, blank=True)
    override_network_profile_ref_a5238a841e104be7_ref = models.ForeignKey(NetworkProfile, null=True, blank=True, related_name="service_override_network_profile_ref_a5238a841e104be7", on_delete=models.PROTECT)
    override_application_profile_ref_ef821d2d90d34705_ref = models.ForeignKey(ApplicationProfile, null=True, blank=True, related_name="service_override_application_profile_ref_ef821d2d90d34705", on_delete=models.PROTECT)
    network_profile_ref_60f835a627d74da6_ref = models.ForeignKey(NetworkProfile, null=True, blank=True, related_name="virtualservice_network_profile_ref_60f835a627d74da6", on_delete=models.PROTECT)
    server_network_profile_ref_c56fdf95b4624e29_ref = models.ForeignKey(NetworkProfile, null=True, blank=True, related_name="virtualservice_server_network_profile_ref_c56fdf95b4624e29", on_delete=models.PROTECT)
    pool_ref_42037b7c5f7b4632_ref = models.ForeignKey(Pool, null=True, blank=True, related_name="virtualservice_pool_ref_42037b7c5f7b4632", on_delete=models.PROTECT)
    http_policy_set_ref_bd3a530805bc4205_ref = models.ForeignKey(HTTPPolicySet, null=True, blank=True, related_name="httppolicies_http_policy_set_ref_bd3a530805bc4205", on_delete=models.PROTECT)
    dns_policy_ref_5736612e85a3486c_ref = models.ForeignKey(DnsPolicy, null=True, blank=True, related_name="dnspolicies_dns_policy_ref_5736612e85a3486c", on_delete=models.PROTECT)
    security_policy_ref_f78c3aa2f83640ec_ref = models.ForeignKey(SecurityPolicy, null=True, blank=True, related_name="virtualservice_security_policy_ref_f78c3aa2f83640ec", on_delete=models.PROTECT)
    ssl_profile_ref_1d561fe4569b4179_ref = models.ForeignKey(SSLProfile, null=True, blank=True, related_name="virtualservice_ssl_profile_ref_1d561fe4569b4179", on_delete=models.PROTECT)
    vs_datascript_set_ref_c74522773fc946e9_ref = models.ForeignKey(VSDataScriptSet, null=True, blank=True, related_name="vsdatascripts_vs_datascript_set_ref_c74522773fc946e9", on_delete=models.PROTECT)
    auth_profile_ref_aafc6641b61b47f8_ref = models.ForeignKey(AuthProfile, null=True, blank=True, related_name="httpclientauthenticationparams_auth_profile_ref_aafc6641b61b47f8", on_delete=models.PROTECT)
    pool_group_ref_824ae215337b4ae0_ref = models.ForeignKey(PoolGroup, null=True, blank=True, related_name="virtualservice_pool_group_ref_824ae215337b4ae0", on_delete=models.PROTECT)
    dns_policy_ref_e8841b81fb8a4570_ref = models.ForeignKey(DnsPolicy, null=True, blank=True, related_name="dnspolicies_dns_policy_ref_e8841b81fb8a4570", on_delete=models.PROTECT)
    microservice_ref_faacb3f7b9484379_ref = models.ForeignKey(MicroService, null=True, blank=True, related_name="virtualservice_microservice_ref_faacb3f7b9484379", on_delete=models.PROTECT)
    service_pool_ref_9a0fe59564434ceb_ref = models.ForeignKey(Pool, null=True, blank=True, related_name="servicepoolselector_service_pool_ref_9a0fe59564434ceb", on_delete=models.PROTECT)
    service_pool_group_ref_2a0d4469e2df4d93_ref = models.ForeignKey(PoolGroup, null=True, blank=True, related_name="servicepoolselector_service_pool_group_ref_2a0d4469e2df4d93", on_delete=models.PROTECT)
    traffic_clone_profile_ref_907518cd4f894183_ref = models.ForeignKey(TrafficCloneProfile, null=True, blank=True, related_name="virtualservice_traffic_clone_profile_ref_907518cd4f894183", on_delete=models.PROTECT)
    rewritable_content_ref_467f21734b1d49f5_ref = models.ForeignKey(StringGroup, null=True, blank=True, related_name="contentrewriteprofile_rewritable_content_ref_467f21734b1d49f5", on_delete=models.PROTECT)
    waf_policy_ref_e20fb40a7885458c_ref = models.ForeignKey(WafPolicy, null=True, blank=True, related_name="virtualservice_waf_policy_ref_e20fb40a7885458c", on_delete=models.PROTECT)
    error_page_profile_ref_b1643bcefc644eaa_ref = models.ForeignKey(ErrorPageProfile, null=True, blank=True, related_name="virtualservice_error_page_profile_ref_b1643bcefc644eaa", on_delete=models.PROTECT)
    l4_policy_set_ref_2f9c165da969471b_ref = models.ForeignKey(L4PolicySet, null=True, blank=True, related_name="l4policies_l4_policy_set_ref_2f9c165da969471b", on_delete=models.PROTECT)
    auth_profile_ref_8ea0674ee5d34ee1_ref = models.ForeignKey(AuthProfile, null=True, blank=True, related_name="authenticationpolicy_auth_profile_ref_8ea0674ee5d34ee1", on_delete=models.PROTECT)
    default_auth_profile_ref_66f5c59c1c534c04_ref = models.ForeignKey(AuthProfile, null=True, blank=True, related_name="authenticationpolicy_default_auth_profile_ref_66f5c59c1c534c04", on_delete=models.PROTECT)
    tenant_ref_bbffc23cb6324b41_ref = models.ForeignKey(Tenant, null=True, blank=True, related_name="ssopolicy_tenant_ref_bbffc23cb6324b41", on_delete=models.PROTECT)
    ssl_profile_ref_309b7c33ad8f4924_ref = models.ForeignKey(SSLProfile, null=True, blank=True, related_name="sslprofileselector_ssl_profile_ref_309b7c33ad8f4924", on_delete=models.PROTECT)
    sso_policy_ref_fa943b8896934639_ref = models.ForeignKey(SSOPolicy, null=True, blank=True, related_name="virtualservice_sso_policy_ref_fa943b8896934639", on_delete=models.PROTECT)
    signing_ssl_key_and_certificate_ref_6586bc0559064d5f_ref = models.ForeignKey(SSLKeyAndCertificate, null=True, blank=True, related_name="samlspconfig_signing_ssl_key_and_certificate_ref_6586bc0559064d5f", on_delete=models.PROTECT)
    group_refs = models.ManyToManyField(IpAddrGroup, related_name="virtualservice_ipaddrgroup", through="VirSerIpAddGro")
    string_group_refs = models.ManyToManyField(StringGroup, related_name="virtualservice_stringgroup", through="VirSerStrGro")
    sp_pool_refs = models.ManyToManyField(Pool, related_name="virtualservice_pool", through="VirSerPoo")
    ssl_key_and_certificate_refs = models.ManyToManyField(SSLKeyAndCertificate, related_name="virtualservice_sslkeyandcertificate", through="VirSerSSLKeyAndCer")
    _last_modified = models.CharField(max_length=16, null=True, blank=True)

    references = {
        'root.network_profile_uuid': ('refers_to', u'NetworkProfile', '60f835a627d74da6'),
        'root.analytics_policy.client_insights_sampling.skip_uris.string_group_uuids': ('refers_to', u'StringGroup', 'a179ad62587c4f1d'),
        'root.vip.ipam_network_subnet.network_uuid': ('hyperlink_to', u'Network', '89099af8da194d26'),
        'root.sso_policy.authentication_policy.authn_rules.match.path.string_group_uuids': ('refers_to', u'StringGroup', 'a90fd39b14d24fff'),
        'root.vs_datascripts.vs_datascript_set_uuid': ('refers_to', u'VSDataScriptSet', 'c74522773fc946e9'),
        'root.analytics_policy.client_log_filters.uri.string_group_uuids': ('refers_to', u'StringGroup', '9a04c2a96c364727'),
        'root.discovered_networks.network_uuid': ('hyperlink_to', u'Network', '683e22c1127f4de5'),
        'root.topology_policies.dns_policy_uuid': ('refers_to', u'DnsPolicy', 'e8841b81fb8a4570'),
        'root.network_uuid': ('hyperlink_to', u'Network', '8ef0fd6433f84b9c'),
        'root.sso_policy.authentication_policy.auth_profile_uuid': ('refers_to', u'AuthProfile', '8ea0674ee5d34ee1'),
        'root.se_group_uuid': ('weak_refers_to', u'ServiceEngineGroup', '825a5cd51cac4277'),
        'root.pool_group_uuid': ('refers_to', u'PoolGroup', '824ae215337b4ae0'),
        'root.vip_runtime.se_list.se_uuid': ('hyperlink_to', u'ServiceEngine', '0ebae756fe4c4c27'),
        'root.vip.network_uuid': ('hyperlink_to', u'Network', '319ff9de04814a2a'),
        'root.error_page_profile_uuid': ('refers_to', u'ErrorPageProfile', 'b1643bcefc644eaa'),
        'root.sso_policy.authentication_policy.default_auth_profile_uuid': ('refers_to', u'AuthProfile', '66f5c59c1c534c04'),
        'root.network_security_policy_uuid': ('refers_to', u'NetworkSecurityPolicy', '63f168e9670b470a'),
        'root.l4_policies.l4_policy_set_uuid': ('refers_to', u'L4PolicySet', '2f9c165da969471b'),
        'root.dns_policies.dns_policy_uuid': ('refers_to', u'DnsPolicy', '5736612e85a3486c'),
        'root.analytics_policy.client_log_filters.client_ip.group_uuids': ('refers_to', u'IpAddrGroup', '407ef1e5c52042c5'),
        'root.vh_parent_vs_uuid': ('hyperlink_to', u'VirtualService', '02f95017e61c4e84'),
        'root.cloud_uuid': ('belongs_to', u'Cloud', '3814e6ab7c594e2b'),
        'root.ssl_profile_selectors.ssl_profile_uuid': ('refers_to', u'SSLProfile', '309b7c33ad8f4924'),
        'root.vsvip_uuid': ('hyperlink_to', u'VsVip', '146ef95a20b94099'),
        'root.client_auth.auth_profile_uuid': ('refers_to', u'AuthProfile', 'aafc6641b61b47f8'),
        'root.pool_uuid': ('refers_to', u'Pool', '42037b7c5f7b4632'),
        'root.ssl_profile_uuid': ('refers_to', u'SSLProfile', '1d561fe4569b4179'),
        'root.traffic_clone_profile_uuid': ('refers_to', u'TrafficCloneProfile', '907518cd4f894183'),
        'root.analytics_policy.client_insights_sampling.client_ip.group_uuids': ('refers_to', u'IpAddrGroup', 'f0ab20243ee94765'),
        'root.service_pool_select.service_pool_uuid': ('refers_to', u'Pool', '9a0fe59564434ceb'),
        'root.ipam_network_subnet.network_uuid': ('hyperlink_to', u'Network', '66940c8c2804426b'),
        'root.sso_policy.authorization_policy.authz_rules.match.attr_matches.attribute_value_list.string_group_uuids': ('refers_to', u'StringGroup', '28dc7d29cb82443a'),
        'root.sso_policy.authorization_policy.authz_rules.match.path.string_group_uuids': ('refers_to', u'StringGroup', '475c9fd8ee3d4237'),
        'root.client_auth.request_uri_path.string_group_uuids': ('refers_to', u'StringGroup', '83f58018930c4edd'),
        'root.content_rewrite.rewritable_content_uuid': ('refers_to', u'StringGroup', '467f21734b1d49f5'),
        'root.security_policy_uuid': ('refers_to', u'SecurityPolicy', 'f78c3aa2f83640ec'),
        'root.analytics_policy.client_insights_sampling.sample_uris.string_group_uuids': ('refers_to', u'StringGroup', '015b9a42c06f4a73'),
        'root.services.override_application_profile_uuid': ('refers_to', u'ApplicationProfile', 'ef821d2d90d34705'),
        'root.discovered_network_uuid': ('hyperlink_to', u'Network', 'a70384a1d02a479a'),
        'root.application_profile_uuid': ('refers_to', u'ApplicationProfile', '5549ba080204459a'),
        'root.services.override_network_profile_uuid': ('refers_to', u'NetworkProfile', 'a5238a841e104be7'),
        'root.tenant_uuid': ('belongs_to', u'Tenant', '51a7d62c7716431e'),
        'root.http_policies.http_policy_set_uuid': ('refers_to', u'HTTPPolicySet', 'bd3a530805bc4205'),
        'root.analytics_profile_uuid': ('refers_to', u'AnalyticsProfile', '4513ed84d7284fc6'),
        'root.vip.discovered_networks.network_uuid': ('hyperlink_to', u'Network', '7af8984fdd2048c7'),
        'root.sso_policy.authentication_policy.authn_rules.match.client_ip.group_uuids': ('refers_to', u'IpAddrGroup', '695699b030c54c87'),
        'root.sp_pool_uuids': ('refers_to', u'Pool', '11bbd216ac36431a'),
        'root.ssl_key_and_certificate_uuids': ('refers_to', u'SSLKeyAndCertificate', '8ec83fcbce66442a'),
        'root.sso_policy.tenant_uuid': ('belongs_to', u'Tenant', 'bbffc23cb6324b41'),
        'root.server_network_profile_uuid': ('refers_to', u'NetworkProfile', 'c56fdf95b4624e29'),
        'root.microservice_uuid': ('refers_to', u'MicroService', 'faacb3f7b9484379'),
        'root.saml_sp_config.signing_ssl_key_and_certificate_uuid': ('refers_to', u'SSLKeyAndCertificate', '6586bc0559064d5f'),
        'root.service_pool_select.service_pool_group_uuid': ('refers_to', u'PoolGroup', '2a0d4469e2df4d93'),
        'root.sso_policy_uuid': ('refers_to', u'SSOPolicy', 'fa943b8896934639'),
        'root.vrf_context_uuid': ('weak_refers_to', u'VrfContext', '6f1e8d7a184447a9'),
        'root.waf_policy_uuid': ('refers_to', u'WafPolicy', 'e20fb40a7885458c'),
        'root.ssl_profile_selectors.client_ip_list.group_uuids': ('refers_to', u'IpAddrGroup', '164ced46d4a5491b'),
    }
    sensitive_fields = {
    }
    pb_check_fields = {
        'root.azure_availability_set': 'f_readonly',
        'root.cloud_uuid': 'f_immutable',
        'root.dns_info.metadata': 'f_readonly',
        'root.vsvip_cloud_config_cksum': 'f_internal',
        'root.sso_policy.authentication_policy.sp_metadata': 'f_readonly',
        'root.saml_sp_config.sp_metadata': 'f_readonly',
        'root.sp_pool_uuids': 'f_readonly',
        'root.type': 'f_immutable',
    }

    @staticmethod
    def get_extension_fields():
        return ['redis_ip', 'redis_port', 'redis_db', 'vh_child_vs_uuid', 'lif', 'apic_extension', 'tls_ticket_key', 'ipam_dns_records', 'vip_runtime', 'version', 'controller_ip', 'marked_for_delete', 'self_se_election', 'gslb_dns_update', 'uuid', 'sec_mgr_info']

    class Meta:
        unique_together = ('name','tenant_ref','cloud_ref',)

class VirSerIpAddGro (models.Model):
    virtualservice = models.ForeignKey(VirtualService, null=True, blank=True, on_delete=models.PROTECT) 
    ipaddrgroup = models.ForeignKey(IpAddrGroup, null=True, blank=True, on_delete=models.PROTECT) 

class VirSerStrGro (models.Model):
    virtualservice = models.ForeignKey(VirtualService, null=True, blank=True, on_delete=models.PROTECT) 
    stringgroup = models.ForeignKey(StringGroup, null=True, blank=True, on_delete=models.PROTECT) 

class VirSerPoo (models.Model):
    virtualservice = models.ForeignKey(VirtualService, null=True, blank=True, on_delete=models.PROTECT) 
    pool = models.ForeignKey(Pool, null=True, blank=True, on_delete=models.PROTECT) 

class VirSerSSLKeyAndCer (models.Model):
    virtualservice = models.ForeignKey(VirtualService, null=True, blank=True, on_delete=models.PROTECT) 
    sslkeyandcertificate = models.ForeignKey(SSLKeyAndCertificate, null=True, blank=True, on_delete=models.PROTECT) 


############################################################################
#
# AVI CONFIDENTIAL
# __________________
#
# [2013] - [2018] Avi Networks Incorporated
# All Rights Reserved.
#
# NOTICE: All information contained herein is, and remains the property
# of Avi Networks Incorporated and its suppliers, if any. The intellectual
# and technical concepts contained herein are proprietary to Avi Networks
# Incorporated, and its suppliers and are covered by U.S. and Foreign
# Patents, patents in process, and are protected by trade secret or
# copyright law, and other laws. Dissemination of this information or
# reproduction of this material is strictly forbidden unless prior written
# permission is obtained from Avi Networks Incorporated.
###

import time
from avi.protobuf.vs_pb2 import VsApicExtension as VsApicExtensionProto



class VsApicExtension (models.Model, GenBase):
    pb_class = VsApicExtensionProto
    json = True
    random_uuid = True

    @staticmethod
    def gen_uuid(id=1):
        return 'vsapicextension-%s' % uuid.uuid4()

    def save(self, update_time=False, *args, **kwargs):
        if not self.slug:
            if not self.uuid:
                self.uuid = self.gen_uuid()
            self.slug = self.uuid
        if (hasattr(self, '_last_modified') and
                (update_time or hasattr(self, '__update_time'))):
            delattr(self, '__update_time')
            self._last_modified = str(int(time.time()*1000000))
            if hasattr(self, 'json_data'):
                self.json_data['_last_modified'] = self._last_modified
        super(VsApicExtension, self).save(*args, **kwargs)

    def save_pb(self, *args, **kwargs):
        save_model_object(self)
        super(VsApicExtension, self).save(*args, **kwargs)

    def delete(self):
        delete_model_object(self)
        super(VsApicExtension, self).delete()

    def serialize(self):
        return self.protobuf().SerializeToString()

    def _protobuf(self):
        pb = VsApicExtensionProto()
        if hasattr(self, 'json_data') and self.json_data:
            updated_json = copy.deepcopy(self.json_data)
            transform_json_refs_to_uuids(updated_json, refs=self.references)
            json2pb(pb, updated_json, replace=True)
        if getattr(self, 'uuid', None):
            pb.uuid = self.uuid
        return pb


    def protobuf(self, decrypt=False):
        return get_model_protobuf(self, decrypt=decrypt)


    uuid = models.CharField(max_length=128, editable=False, unique=True)
    slug = AviSlugField(max_length=128, null=False, blank=False)
    pb_data = ByteaField()
    json_data = AviJsonField()
    _last_modified = models.CharField(max_length=16, null=True, blank=True)

    references = {
    }
    sensitive_fields = {
    }
    pb_check_fields = {
    }

    @staticmethod
    def get_extension_fields():
        return []


